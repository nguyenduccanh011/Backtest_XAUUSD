<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä Backtest XAUUSD - Trading Strategy Analyzer</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä Backtest XAUUSD - Trading Strategy Analyzer</h1>
        </header>

        <!-- RSI Thresholds Section -->
        <section class="card">
            <h2>üìä Ng∆∞·ª°ng RSI v√†o l·ªánh</h2>
            
            <div class="form-group">
                <label>H∆∞·ªõng v√†o l·ªánh:</label>
                <div class="radio-group">
                    <input type="radio" id="direction-buy" name="direction" value="BUY" checked>
                    <label for="direction-buy" class="btn-buy">üü¢ BUY</label>
                    <input type="radio" id="direction-sell" name="direction" value="SELL">
                    <label for="direction-sell" class="btn-sell">üî¥ SELL</label>
                </div>
            </div>

            <div class="form-group">
                <label>Ch·∫ø ƒë·ªô:</label>
                <div class="radio-group">
                    <input type="radio" id="mode-manual" name="rsi-mode" value="manual" checked>
                    <label for="mode-manual">‚úèÔ∏è Nh·∫≠p th·ªß c√¥ng (3 m·ªëc RSI)</label>
                    <input type="radio" id="mode-auto" name="rsi-mode" value="auto">
                    <label for="mode-auto">ü§ñ T·ª± ƒë·ªông t·ªëi ∆∞u (BUY: 30-35, SELL: 65-70)</label>
                </div>
            </div>

            <div id="rsi-thresholds" class="form-group">
                <div class="input-row">
                    <div class="input-group">
                        <label id="rsi-entry-label">RSI v√†o l·ªánh (BUY):</label>
                        <input type="number" id="rsi-entry" value="35" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>RSI ƒë√≥ng l·ªánh:</label>
                        <input type="number" id="rsi-exit" value="50" step="0.1">
                    </div>
                    <div class="input-group">
                        <label>RSI d·ª´ng v√†o l·ªánh:</label>
                        <input type="number" id="rsi-break" value="40" step="0.1">
                    </div>
                </div>
                <p class="info-text" id="rsi-info">MUA: v√†o khi RSI ‚â§ m·ªëc 1, ch·ªët khi RSI ‚âà m·ªëc 2, d·ª´ng ƒë·∫øm khi RSI < m·ªëc 3</p>
            </div>
        </section>

        <!-- Lot/Money Section -->
        <section class="card">
            <h2>üí∞ D√£y lot / s·ªë ti·ªÅn v√†o l·ªánh</h2>
            
            <div class="header-actions">
                <div class="button-group">
                    <button id="btn-save" class="btn-action">üíæ L∆∞u</button>
                    <button id="btn-load" class="btn-action">üìÇ T·∫£i</button>
                    <button id="btn-update" class="btn-action">üîÑ C·∫≠p nh·∫≠t</button>
                </div>
                <button id="btn-apply" class="btn-success">‚úÖ √Åp d·ª•ng</button>
            </div>

            <div class="three-columns">
                <div class="column">
                    <h3>üí∞ Nh·∫≠p s·ªë ti·ªÅn</h3>
                    <div class="table-container">
                        <table id="money-input-table">
                            <thead>
                                <tr>
                                    <th>STT l·ªánh</th>
                                    <th>S·ªë ti·ªÅn (USD)</th>
                                </tr>
                            </thead>
                            <tbody id="money-input-tbody">
                                <!-- Rows will be added dynamically when user inputs -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="column">
                    <h3>üíµ S·ªë ti·ªÅn v√†o l·ªánh (USD)</h3>
                    <div class="table-container">
                        <table id="money-table">
                            <thead>
                                <tr>
                                    <th>STT Entry</th>
                                    <th>S·ªë ti·ªÅn (USD)</th>
                                </tr>
                            </thead>
                            <tbody id="money-tbody">
                                <tr><td colspan="2">Nh·∫≠p s·ªë ti·ªÅn v√† nh·∫•n '√Åp d·ª•ng'</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="column">
                    <h3>üìä Lot Size</h3>
                    <div class="table-container">
                        <table id="lot-table">
                            <thead>
                                <tr>
                                    <th>STT Entry</th>
                                    <th>Lot Size</th>
                                </tr>
                            </thead>
                            <tbody id="lot-tbody">
                                <tr><td colspan="2">Nh·∫≠p s·ªë ti·ªÅn v√† nh·∫•n '√Åp d·ª•ng'</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Actions Section -->
        <section class="card">
            <div class="action-buttons">
                <button id="btn-select-file" class="btn-action">üìÅ Ch·ªçn file data</button>
                <span id="file-label" class="file-label"></span>
                <button id="btn-run" class="btn-primary">üöÄ Ch·∫°y backtest</button>
                <span id="status-label" class="status-label"></span>
            </div>
        </section>

        <!-- Results Section -->
        <section class="card">
            <h2>üìà K·∫øt qu·∫£ t√≥m t·∫Øt</h2>
            <div id="result-text" class="result-text">
                Ch·ªù k·∫øt qu·∫£ backtest...
            </div>
        </section>

        <!-- TradingView Chart Section -->
        <section class="card chart-card-fullwidth">
            <h2>üìä Bi·ªÉu ƒë·ªì gi√° XAUUSD</h2>
            <div id="tv_chart_container" style="width: 100%; height: 600px; position: relative;">
                <div id="tv_loading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #666;">
                    <div style="font-size: 18px; margin-bottom: 10px;">‚è≥ ƒêang t·∫£i bi·ªÉu ƒë·ªì...</div>
                    <div style="font-size: 14px;">Vui l√≤ng ƒë·ª£i trong gi√¢y l√°t</div>
                </div>
            </div>
        </section>
    </div>

    <!-- TradingView Library - Load with defer to not block page rendering -->
    <script type="text/javascript" src="/charting_library/charting_library.standalone.js" defer></script>
    <!-- Custom Datafeed -->
    <script type="text/javascript" src="/static/tv_datafeed.js" defer></script>
    <!-- App Script -->
    <script src="/static/app.js" defer></script>
</body>
</html>

